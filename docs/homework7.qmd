---
title: "Homework 7"
author: "Sucry Bendeck"
date: "last-modified"
format: html
editor: visual
embed-resources: true
---


```{r, warning=FALSE, message=FALSE, echo = FALSE}
library(dplyr)
library(jsonlite)
library(tidyr)
library(vegabrite)
```

**List some guidelines/advice Wilke gives about creating bar charts.**
  - If names are too big switch the axis.
  - 

**When is it not advised to use a bar chart? Why?**
  - When the categorical variables are on the x-axis becuse they take so much space.
**What alternatives to bars are mentioned in this chapter?**
  - Dot plots and heat maps.

**What guidance does Wilke give about whether or not to stack bars vs. dodge them (using an offset in Vega-Lite)?**
  -  Stacking is useful when the sum of the amounts represented by the individual stacked bars is in itself a meaningful amount.It is also appropriate when the individual bars represent counts
  -  We offset to avoid the mental effort.
**Recreate Figure 6.3 in Vega-Lite. [CSV]**
```{r}
movie_data<-read.csv("https://calvin-data304.netlify.app/data/cow-movies.csv")
head(movie_data)
```

```{r}
vl_chart(data = movie_data, height = 400, width = 600) |>
  vl_mark_bar() |>
  vl_encode_x("amount", title = "Weekend Gross(million USD)", type = "Quantitative") |>
  vl_encode_y("title", type = "Ordinal"  , sort = list("-sort"))

```

**Recreate Figures 6.8 and 6.9 in Vega-Lite. [CSV]**
```{r}
#Reading the data:
income_data <- read.csv("https://calvin-data304.netlify.app/data/cow-income.csv")
head(income_data)
```

```{r} 
#Graph6.8- initial graph
vl_chart(data = income_data, height = 400, width = 600) |>
  vl_mark_bar() |>
  vl_encode_x("age", title = "Age (years)", type = "ordinal") |>
  vl_encode_y("median_income", type = "Ordinal"  , sort = "ascending")|>
  vl_encode_color("race",type ="Nominal")
```
```{r}
# Data prep
income_data_grouped <- income_data |>
  mutate(race = recode(race, "white_non_hispanic" = "white")) |>  # Combining
  group_by(race, age) |>  # Group by both race and age
  summarise(median_income = median(median_income, na.rm = TRUE), .groups = "drop") |>
  filter(race != "all") |>  # Drop the rows where race is "all"
  arrange(desc(median_income))

# Visualization 6.8
vl_chart(data = income_data_grouped, height = 400, width = 600) |>
  vl_mark_bar() |>
  vl_encode_x("age", title = "Age", type = "Nominal") |>  
  vl_encode_y("median_income", title = "Median Income", type = "Quantitative", sort = list("ascending")) |>
  vl_encode_color("race", type = "Nominal") |>
  vl_facet("race",type = "Nominal", columns = 2)

# Visualization 6.9
vl_chart(data = income_data_grouped, height = 400, width = 600) |>
  vl_mark_bar() |>
  vl_encode_x("race", title = "Race", type = "Nominal", sort = list("-race")) |>  
  vl_encode_y("median_income", title = "Median Income", type = "Quantitative", sort = list("ascending")) |>
  vl_encode_color("age", type = "Nominal") |>
  vl_encode_xOffset("age",type = "Nominal")
```


**Recreate Figure 6.11 and explain why Figures 6.12 and 6.13 are labeled “bad”. [CSV]**

```{r}
#Reading the data:
countries_data <- read.csv("https://calvin-data304.netlify.app/data/cow-gapminder.csv")
head(countries_data)
```
```{r}
countries_data_combined <- countries_data |>  
  filter(year == 2007, continent == "Americas") |>  
  group_by(country) |>  
  summarise(lifeExp = median(lifeExp, na.rm = TRUE), .groups = "drop") |> 
  filter(lifeExp >= 60) |>
  arrange(desc(lifeExp))  

# Visualization 6.11
vl_chart(data = countries_data_combined, height = 400, width = 600) |>
  vl_mark_circle() |>
  vl_encode_x("lifeExp", title = "Life Expectancy", type = "Quantitative", scale = list(domain = list(60, 85)) )|>  
  vl_encode_y("country", title = "Country", type = "Nominal",sort = list("-lifeExp"))

```
```{r}
# 6.12
vl_chart(data = countries_data_combined, height = 400, width = 600) |>
  vl_mark_bar() |>
  vl_encode_x("lifeExp", title = "Life Expectancy", type = "Quantitative", scale = list(domain = list(0, 85)) )|>  
  vl_encode_y("country", title = "Country", type = "Nominal",sort = list("-lifeExp"))
#How to step, ticks?
```
```{r}
#6.13
vl_chart(data = countries_data_combined, height = 400, width = 600) |>
  vl_mark_circle() |>
  vl_encode_x("lifeExp", title = "Life Expectancy", type = "Quantitative", scale = list(domain = list(60, 85)) )|>  
  vl_encode_y("country", title = "Country", type = "Nominal")
# step by 5?
```
 # **Exercise 2 (A video presentation by Healy)**
  - *Watch this video starting at 12:18 until 49:52. (You are welcome to watch the whole thing if you like.) You will see some things that look familiar from our discussion of perception in class, but there are also a number of additional examples and discussion.*
  - 

- *List at least three pieces of advice you can glean from this video that might help you design good graphics.*
  - If you use color make sure that the contrast in color will not be deceiving or that will add to the distraction.
  - Categorical variables usually in the y axis. No iron rules but keep in mind your audience and what story you are trying to convey.                 - Context,Convection,Meaning.
  -
 - *There are two figures in this video that come from Chapter 1 of Tufte (2001). Did you spot them? Which figures are they?*
  - 